function showWait() {
    var e = Main.ins
      , t = new eui.Rect;
    t.fillColor = 0,
    t.alpha = .6,
    t.bottom = t.top = t.left = t.right = 0,
    e.addChild(t);
    var r = new eui.Image;
    r.source = "entry/qq.png",
    r.scaleX = r.scaleY = 1.5,
    r.$onRemoveFromStage = function() {
        egret.Tween.removeTweens(r)
    }
    ,
    r.verticalCenter = r.horizontalCenter = 0;
    var n = egret.Tween.get(r, {
        loop: !0
    });
    n.to({
        rotation: 360
    }, 1e3),
    e.addChild(r)
}
function sendHttp(e, t, r) {
    var n = this;
    return void 0 === t && (t = egret.HttpResponseType.TEXT),
    void 0 === r && (r = egret.HttpMethod.GET),
    new Promise(function(a) {
        var i = new egret.HttpRequest;
        i.responseType = t,
        i.open(e, r),
        i.once(egret.Event.COMPLETE, function(e) {
            a(i.response)
        }, n),
        i.once(egret.IOErrorEvent.IO_ERROR, function() {
            a(null)
        }, n),
        i.send()
    }
    )
}
function cImg(e, t) {
    var r = new eui.Image;
    return r.source = "entry/" + e,
    t.addChild(r),
    r
}
function urlLoad(e, t) {
    var r = this;
    return new Promise(function(n) {
        RES.getResByUrl(e, function(e, t) {
            e && n(e)
        }, r, t)
    }
    )
}
var __reflect = this && this.__reflect || function(e, t, r) {
    e.__class__ = t,
    r ? r.push(t) : r = [t],
    e.__types__ = e.__types__ ? r.concat(e.__types__) : r
}
, __extends = this && this.__extends || function(e, t) {
    function r() {
        this.constructor = e
    }
    for (var n in t)
        t.hasOwnProperty(n) && (e[n] = t[n]);
    r.prototype = t.prototype,
    e.prototype = new r
}
, __awaiter = this && this.__awaiter || function(e, t, r, n) {
    return new (r || (r = Promise))(function(a, i) {
        function o(e) {
            try {
                l(n.next(e))
            } catch (t) {
                i(t)
            }
        }
        function s(e) {
            try {
                l(n["throw"](e))
            } catch (t) {
                i(t)
            }
        }
        function l(e) {
            e.done ? a(e.value) : new r(function(t) {
                t(e.value)
            }
            ).then(o, s)
        }
        l((n = n.apply(e, t || [])).next())
    }
    )
}
, __generator = this && this.__generator || function(e, t) {
    function r(e) {
        return function(t) {
            return n([e, t])
        }
    }
    function n(r) {
        if (a)
            throw new TypeError("Generator is already executing.");
        for (; l; )
            try {
                if (a = 1,
                i && (o = i[2 & r[0] ? "return" : r[0] ? "throw" : "next"]) && !(o = o.call(i, r[1])).done)
                    return o;
                switch (i = 0,
                o && (r = [0, o.value]),
                r[0]) {
                case 0:
                case 1:
                    o = r;
                    break;
                case 4:
                    return l.label++,
                    {
                        value: r[1],
                        done: !1
                    };
                case 5:
                    l.label++,
                    i = r[1],
                    r = [0];
                    continue;
                case 7:
                    r = l.ops.pop(),
                    l.trys.pop();
                    continue;
                default:
                    if (o = l.trys,
                    !(o = o.length > 0 && o[o.length - 1]) && (6 === r[0] || 2 === r[0])) {
                        l = 0;
                        continue
                    }
                    if (3 === r[0] && (!o || r[1] > o[0] && r[1] < o[3])) {
                        l.label = r[1];
                        break
                    }
                    if (6 === r[0] && l.label < o[1]) {
                        l.label = o[1],
                        o = r;
                        break
                    }
                    if (o && l.label < o[2]) {
                        l.label = o[2],
                        l.ops.push(r);
                        break
                    }
                    o[2] && l.ops.pop(),
                    l.trys.pop();
                    continue
                }
                r = t.call(e, l)
            } catch (n) {
                r = [6, n],
                i = 0
            } finally {
                a = o = 0
            }
        if (5 & r[0])
            throw r[1];
        return {
            value: r[0] ? r[1] : void 0,
            done: !0
        }
    }
    var a, i, o, s, l = {
        label: 0,
        sent: function() {
            if (1 & o[0])
                throw o[1];
            return o[1]
        },
        trys: [],
        ops: []
    };
    return s = {
        next: r(0),
        "throw": r(1),
        "return": r(2)
    },
    "function" == typeof Symbol && (s[Symbol.iterator] = function() {
        return this
    }
    ),
    s
}
, entry;
!function(e) {
    var t = function(e) {
        function t() {
            var t = e.call(this) || this;
            window.delSplash && window.delSplash(),
            t.left = t.top = t.right = t.bottom = 0;
            var r = urlParam.loadBg || "loadBg.jpg"
              , n = cImg(r, t);
            if (n.horizontalCenter = n.verticalCenter = 0,
            urlParam.showBackHall) {
                var a = cImg("btnBackhall.png", t);
                a.left = 5,
                a.top = 50,
                a.addEventListener(egret.TouchEvent.TOUCH_TAP, function(e) {
                    var t = window.logout;
                    t && t({
                        confirm: !0
                    })
                }, t)
            }
            t.pg = new eui.ProgressBar,
            t.pg.thumb = cImg("thumb.png", t.pg),
            t.pg.horizontalCenter = 0,
            t.pg.bottom = 72,
            t.addChild(t.pg),
            t.pg.value = Main.curLP,
            Main.loadProgress.push(function(e, r) {
                t.pg.value = e,
                t.loadText.text = r
            });
            var i = cImg("progressBg.png", t);
            i.horizontalCenter = 0,
            i.bottom = t.pg.bottom - 9;
            var o = new eui.Label;
            urlParam.isWxGame || (o.textFlow = (new egret.HtmlTextParser).parse("<u>若长时间加载不成功，点击这里重载</u>")),
            o.textColor = 65280,
            o.horizontalCenter = 0,
            o.bottom = 30,
            o.size = 20,
            t.addChild(o),
            o.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                location.reload()
            }, t);
            var s = new eui.Label;
            s.size = 14,
            s.horizontalCenter = 0,
            s.bottom = 120,
            s.textColor = 2137888,
            s.text = Main.curStr,
            t.addChild(s),
            t.loadText = s;
            var l = ["说好的天荒地老，我不加完你不准走", "玛法大陆的BOSS正在准备宝物掉落", "服装商人正在准备商品", "服务器正在装载海量元宝掉落", "客服小姐姐已经准备好为您服务"];
            t.loadText.visible = i.visible = t.pg.visible = null == urlParam.iosTSType;
            var u = 0
              , c = new eui.Label;
            c.horizontalCenter = 0,
            c.bottom = 150,
            c.size = 18,
            c.textColor = 14800309,
            c.left = c.right = 0,
            c.text = l[u % 5],
            c.textAlign = egret.HorizontalAlign.CENTER,
            t.addChild(c);
            var d = new eui.Label;
            d.horizontalCenter = 0,
            d.bottom = 150,
            d.size = 18,
            d.textColor = 14800309,
            d.left = d.right = 0,
            d.textAlign = egret.HorizontalAlign.CENTER,
            d.text = l[(u + 1) % 5],
            d.visible = !1,
            t.addChild(d);
            var h, g, p = function() {
                if (t.parent) {
                    d.visible = !0,
                    h || (h = c.getBounds(),
                    c.scrollRect = h.clone()),
                    g || (g = d.getBounds(),
                    d.scrollRect = g.clone(),
                    d.scrollRect.y = -d.scrollRect.height - 3);
                    var e = egret.Tween.get(c.scrollRect);
                    e.to({
                        height: 0,
                        y: c.scrollRect.height
                    }, 500);
                    var r = egret.Tween.get(d.scrollRect);
                    r.to({
                        y: 0
                    }, 500).wait(200).call(function() {
                        c.text = l[u % 5],
                        c.scrollRect = h.clone(),
                        d.text = l[(u + 1) % 5],
                        d.scrollRect = g.clone(),
                        d.scrollRect.y = -d.scrollRect.height - 3
                    }),
                    u++,
                    setTimeout(p, 2e3)
                }
            };
            return setTimeout(p, 2e3),
            t
        }
        return __extends(t, e),
        t.prototype.setProgress = function(e, t) {
            this.pg.value = e,
            this.loadText.text = '游戏正在"' + t + '"，请稍后'
        }
        ,
        t
    }(eui.Component);
    e.LoadingScene = t,
    __reflect(t.prototype, "entry.LoadingScene")
}(entry || (entry = {}));
var entry;
!function(e) {
    var t = function() {
        function e() {}
        return e.show = function(e, t, r) {
            var n = this;
            if (!this.isShow) {
                this.isShow = !0;
                var a = egret.MainContext.instance.stage
                  , i = new eui.UILayer
                  , o = new eui.Rect;
                o.left = o.top = o.right = o.bottom = 0,
                o.fillColor = 0,
                o.alpha = .8,
                i.addChild(o);
                var s = new eui.Group;
                s.height = 300,
                s.width = 400,
                s.horizontalCenter = s.verticalCenter = 0;
                var l = cImg("tongyongkuang3bg.png", s);
                l.top = l.left = l.right = l.bottom = 0,
                l.scale9Grid = new egret.Rectangle(11,11,8,8),
                l = cImg("tongyongkuang3tou.png", s),
                l.right = l.left = 0;
                var u = new eui.Label;
                u.text = "提  示",
                u.size = 24,
                u.textColor = 10855294,
                u.horizontalCenter = 0,
                u.top = 11,
                s.addChild(u);
                var c = new eui.Label;
                c.size = 18,
                c.textColor = 11645079,
                c.text = e,
                c.lineSpacing = 5,
                c.verticalCenter = -10,
                c.horizontalCenter = 0,
                c.textAlign = egret.HorizontalAlign.CENTER,
                s.addChild(c);
                var d = new eui.Group
                  , h = new eui.HorizontalLayout;
                h.gap = 20,
                d.layout = h,
                d.top = 230,
                d.bottom = 20,
                d.horizontalCenter = 0,
                s.addChild(d);
                var g = function(e) {
                    var o = new eui.Group
                      , s = new eui.Image;
                    s.source = "entry/btn40.png",
                    s.left = s.top = s.right = s.bottom = 0,
                    o.addChild(s);
                    var l = new eui.Label;
                    l.text = t[e],
                    l.size = 20,
                    l.textColor = 11645079,
                    l.verticalCenter = l.horizontalCenter = 0,
                    o.addChild(l),
                    o.addEventListener(egret.TouchEvent.TOUCH_BEGIN, function() {
                        o.scaleX = o.scaleY = .9
                    }, p),
                    o.addEventListener(egret.TouchEvent.TOUCH_END, function() {
                        o.scaleX = o.scaleY = 1
                    }, p),
                    o.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                        a.removeChild(i),
                        r[e](),
                        n.isShow = !1
                    }, p),
                    d.addChild(o)
                }
                  , p = this;
                for (var v in t)
                    g(v);
                i.addChild(s),
                a.addChild(i)
            }
        }
        ,
        e.isShow = !1,
        e
    }();
    e.Tips = t,
    __reflect(t.prototype, "entry.Tips")
}(entry || (entry = {}));
var AssetAdapter = function() {
    function e() {}
    return e.prototype.getAsset = function(e, t, r) {
        function n(n) {
            t.call(r, n, e)
        }
        if (RES.hasRes(e)) {
            var a = RES.getRes(e);
            a ? n(a) : RES.getResAsync(e, n, this)
        } else
            RES.getResByUrl(e, n, this, RES.ResourceItem.TYPE_IMAGE)
    }
    ,
    e
}();
__reflect(AssetAdapter.prototype, "AssetAdapter", ["eui.IAssetAdapter"]);
var root = "";
window.loginLog = "";
var Main = function(e) {
    function t() {
        var t = null !== e && e.apply(this, arguments) || this;
        return t.canEnter = !1,
        t
    }
    return __extends(t, e),
    t.runGame = function() {
        entry.Socket.connect()
    }
    ,
    t.prototype.startLoad = function() {
        return __awaiter(this, void 0, void 0, function() {
            var e, r, n, a, i, o, s = this;
            return __generator(this, function(l) {
                switch (l.label) {
                case 0:
                    return t.report("load"),
                    this.updateLoad(1 / 6 * 100, "请求区服版本"),
                    [4, sendHttp(urlParam.reqRoot + "user/client/gv.json?game=" + urlParam._game)];
                case 1:
                    return e = l.sent(),
                    r = e ? JSON.parse(e).data : null,
                    urlParam.v = r || urlParam.v,
                    this.updateLoad(2 / 6 * 100, "加载版本文件"),
                    [4, sendHttp(getUrl("ver.json"))];
                case 2:
                    return n = l.sent(),
                    this.updateLoad(50, "加载资源文件"),
                    n && (verData = JSON.parse(n)),
                    [4, this.loadResJson()];
                case 3:
                    return l.sent(),
                    this.updateLoad(4 / 6 * 100, "加载预先项"),
                    urlParam.isWxGame ? (a = window,
                    i = "configs",
                    [4, window.platform.loadZip("config")]) : [3, 5];
                case 4:
                    return a[i] = l.sent(),
                    [3, 7];
                case 5:
                    return [4, this.loadProload()];
                case 6:
                    l.sent(),
                    l.label = 7;
                case 7:
                    return this.updateLoad(5 / 6 * 100, "加载主题文件"),
                    [4, this.loadTheme()];
                case 8:
                    return l.sent(),
                    console.log("thm.js加载成功"),
                    this.updateLoad(100, "加载游戏主程序"),
                    this.canEnter = !0,
                    loginLog += "2:main成功",
                    o = function() {
                        t.report("loaded"),
                        s.enterID && s.showLoad(s.enterID)
                    }
                    ,
                    urlParam.isWxGame ? (window.platform.loadSubpackage("main", function() {
                        console.log("加载子包成功"),
                        o()
                    }, function() {
                        console.log("分包加载失败")
                    }, function(e) {
                        console.log("下载进度", e.progress),
                        console.log("已经下载的数据长度", e.totalBytesWritten),
                        console.log("预期需要下载的数据总长度", e.totalBytesExpectedToWrite)
                    }),
                    [2]) : (egret.getDefinitionByName("GameApp") ? o() : loadSingleScript(getUrl("main.min.js"), o),
                    [2])
                }
            })
        })
    }
    ,
    t.report = function(e, t) {
        if (urlParam.isNew && sendHttp(urlParam.reqRoot + "user/regist/stat.json?appid=" + urlParam.appId + "&serverid=" + urlParam.srvid + "&openid=" + urlParam.openId + "&type=" + e),
        "createRole" == e) {
            var r = window.reprot;
            if (!r)
                return;
            r({
                action: "create_role",
                app_openid: "",
                server: urlParam._game,
                serverName: "",
                openId: urlParam.openId,
                nickName: t[0],
                roleName: t[0],
                openKey: urlParam.openKey,
                level: 1,
                power: 0,
                vip: 0,
                gangName: "",
                balance: 0
            }),
            sendHttp(urlParam.reqRoot + "user/regist/role.json?appid=" + urlParam.appId + ("&serverid=" + urlParam.srvid) + ("&openid=" + urlParam.openId) + ("&nameCn=" + t[0]) + ("&actorid=" + t[1]))
        }
    }
    ,
    t.prototype.updateLoad = function(e, r) {
        for (var n = 0, a = t.loadProgress; n < a.length; n++) {
            var i = a[n];
            i(e, r)
        }
        t.curLP = e,
        t.curStr = r
    }
    ,
    t.prototype.createChildren = function() {
        return __awaiter(this, void 0, void 0, function() {
            var r, n, a, i, o = this;
            return __generator(this, function(s) {
                switch (s.label) {
                case 0:
                    return e.prototype.createChildren.call(this),
                    window.alert ? (r = window.alert,
                    window.alert = function(e) {
                        null != e && e.indexOf && e.indexOf("sound") > -1 || r(e)
                    }
                    ) : window.alert = console.error,
                    t.ins = this,
                    RES.setMaxLoadingThread(6),
                    RES.registerVersionController({
                        init: function() {
                            return new Promise(function(e) {
                                e()
                            }
                            )
                        },
                        getVirtualUrl: getUrl
                    }),
                    egret.ImageLoader.crossOrigin = "anonymous",
                    eui.Label.default_fontFamily = "微软雅黑",
                    n = new AssetAdapter,
                    egret.registerImplementation("eui.IAssetAdapter", n),
                    egret.registerImplementation("eui.IThemeAdapter", new ThemeAdapter),
                    urlParam.isWxGame ? (root = urlParam.root,
                    [4, sendHttp(urlParam.root + urlParam.v + "/ev.json")]) : [3, 3];
                case 1:
                    return a = s.sent(),
                    verData = JSON.parse(a),
                    [4, new Promise(function(e) {
                        var t = window.wx.createImage();
                        t.onload = function() {
                            var r = new egret.BitmapData(t)
                              , n = new egret.Texture;
                            n._setBitmapData(r);
                            var a = new eui.Image;
                            a.source = n,
                            a.horizontalCenter = 0,
                            a.verticalCenter = 0,
                            o.addChild(a),
                            e()
                        }
                        ,
                        t.src = "loadBg.jpg"
                    }
                    )];
                case 2:
                    s.sent(),
                    s.label = 3;
                case 3:
                    return [4, RES.loadConfig("resource/entry.res.json", "/")];
                case 4:
                    return s.sent(),
                    urlParam.user && urlParam.wss && urlParam.srvid ? (t.runGame(),
                    [2]) : (i = new entry.Scene,
                    this.addChild(i),
                    [2])
                }
            })
        })
    }
    ,
    t.prototype.showLoad = function(e) {
        var r = this;
        if (this.enterID = e,
        egret.getDefinitionByName("GameApp") && this.canEnter) {
            loginLog += "3:GameApp初始化";
            var n = !1
              , a = setTimeout(function() {
                var e = new XMLHttpRequest;
                e.open("GET", urlParam.reqRoot + "user/client/errorLog.json?error=" + urlParam.v + "-" + loginLog + "&userid=" + urlParam.openId + "&appId=" + urlParam.appId),
                e.send(null),
                n = !0
            }, 6e4);
            t.loadProgress.length = 0,
            GameApp.ins(function() {
                loginLog += "9:GameApp成功回调",
                r.enterGame()
            }, function() {
                if (n) {
                    var e = new XMLHttpRequest;
                    e.open("GET", urlParam.reqRoot + "user/client/errorLog.json?error=" + urlParam.v + "-登录完成&userid=" + urlParam.openId + "&appId=" + urlParam.appId),
                    e.send(null),
                    n = !1
                }
                loginLog += "11:进入游戏",
                t.report("enterGame"),
                dragonBones.EgretFactory.factory.dispose(),
                clearTimeout(a),
                r.removeChildren()
            })
        }
    }
    ,
    t.prototype.loadResJson = function() {
        var e = this;
        return new Promise(function(t) {
            RES.loadConfig("resource/default.res.json", "resource/");
            var r = function() {
                RES.removeEventListener(RES.ResourceEvent.CONFIG_COMPLETE, r, e),
                t()
            };
            RES.addEventListener(RES.ResourceEvent.CONFIG_COMPLETE, r, e)
        }
        )
    }
    ,
    t.prototype.loadProload = function() {
        var e = this;
        return new Promise(function(t) {
            RES.loadGroup("preload", 0);
            var r = function() {
                RES.removeEventListener(RES.ResourceEvent.GROUP_COMPLETE, r, e),
                t()
            };
            RES.addEventListener(RES.ResourceEvent.GROUP_COMPLETE, r, e)
        }
        )
    }
    ,
    t.prototype.loadTheme = function() {
        var e = this;
        return new Promise(function(t, r) {
            return __awaiter(e, void 0, void 0, function() {
                var e;
                return __generator(this, function(r) {
                    switch (r.label) {
                    case 0:
                        return egret.Capabilities.runtimeType != egret.RuntimeType.WEB ? [3, 2] : [4, new Promise(function(e) {
                            loadSingleScript(getUrl("default.thm.js"), e)
                        }
                        )];
                    case 1:
                        r.sent(),
                        r.label = 2;
                    case 2:
                        return e = new eui.Theme("resource/default.thm.json",this.stage),
                        e.addEventListener(eui.UIEvent.COMPLETE, t, this),
                        [2]
                    }
                })
            })
        }
        )
    }
    ,
    t.prototype.enterGame = function() {
        GameApp.setProxy(entry.Socket.supplyProxy()),
        entry.Socket.sendEnter(this.enterID)
    }
    ,
    t.loadProgress = [],
    t.curLP = 0,
    t.curStr = "",
    t
}(eui.UILayer);
__reflect(Main.prototype, "Main"),
window.Main = Main,
window.entry = entry;
var entry;
!function(e) {
    var t = function(e) {
        function t() {
            var t = e.call(this) || this;
            t.top = 85,
            t.bottom = 110,
            t.horizontalCenter = 0,
            t.width = 550;
            var r = cImg("xfbg.png", t);
            r.scale9Grid = new egret.Rectangle(12,18,23,10),
            r.top = r.left = r.right = r.bottom = 20,
            t.bk2(),
            t.bk1(),
            t.ggd();
            var n = cImg("tuichubtn.png", t);
            return n.right = n.bottom = 35,
            n.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                t.parent.removeChild(t)
            }, t),
            t.setLab(),
            t
        }
        return __extends(t, e),
        t.prototype.setLab = function() {
            return __awaiter(this, void 0, void 0, function() {
                var e, t, r = this;
                return __generator(this, function(n) {
                    switch (n.label) {
                    case 0:
                        return e = new eui.Label,
                        e.size = 20,
                        e.left = 50,
                        e.top = 100,
                        [4, new Promise(function(e) {
                            var t = new egret.HttpRequest;
                            t.responseType = egret.HttpResponseType.TEXT,
                            t.open(urlParam.reqRoot + "/user/client/anno.json?appid=" + urlParam.appId, egret.HttpMethod.GET),
                            t.once(egret.Event.COMPLETE, function(r) {
                                e(t.response)
                            }, r),
                            t.once(egret.IOErrorEvent.IO_ERROR, function() {
                                e(null)
                            }, r),
                            t.send()
                        }
                        )];
                    case 1:
                        return t = n.sent(),
                        e.text = JSON.parse(t).data,
                        this.addChild(e),
                        [2]
                    }
                })
            })
        }
        ,
        t.prototype.bk1 = function() {
            var e = cImg("bk1.png", this);
            e.scale9Grid = new egret.Rectangle(98,0,5,1),
            e.left = 0,
            e.right = 20,
            e = cImg("bk1.png", this),
            e.scaleX = -1,
            e.right = 0
        }
        ,
        t.prototype.bk2 = function() {
            var e = cImg("bk2.png", this);
            e.bottom = 0,
            e.left = 9,
            e.top = 10,
            e.right = 20,
            e.scale9Grid = new egret.Rectangle(85,0,5,5),
            e = cImg("bk2.png", this),
            e.scale9Grid = new egret.Rectangle(85,0,5,5),
            e.scaleX = -1,
            e.right = 9,
            e.bottom = 0,
            e.top = 10
        }
        ,
        t.prototype.ggd = function() {
            var e = new eui.Group
              , t = new eui.HorizontalLayout;
            t.gap = 0,
            e.layout = t,
            e.horizontalCenter = 0,
            this.addChild(e);
            var r = cImg("ggd.png", e);
            r = cImg("ggd.png", e),
            r.scaleX = -1,
            r = cImg("ggt.png", this),
            r.horizontalCenter = 0,
            r.top = 15
        }
        ,
        t
    }(eui.Component);
    e.Notice = t,
    __reflect(t.prototype, "entry.Notice")
}(entry || (entry = {}));
var DebugPlatform = function() {
    function e() {}
    return e.prototype.getUserInfo = function() {
        return __awaiter(this, void 0, void 0, function() {
            return __generator(this, function(e) {
                return [2, {
                    nickName: "username"
                }]
            })
        })
    }
    ,
    e.prototype.login = function() {
        return __awaiter(this, void 0, void 0, function() {
            return __generator(this, function(e) {
                return [2]
            })
        })
    }
    ,
    e
}();
__reflect(DebugPlatform.prototype, "DebugPlatform", ["Platform"]),
window.platform || (window.platform = new DebugPlatform);
var entry;
!function(e) {
    var t = function(t) {
        function r() {
            var r = t.call(this) || this;
            r.left = r.top = r.right = r.bottom = 0;
            var n = cImg("bg.jpg", r);
            n.horizontalCenter = 0,
            n.verticalCenter = 0;
            var a = cImg("gg.png", r);
            if (a.right = 50,
            a.top = 50,
            a.addEventListener(egret.TouchEvent.TOUCH_TAP, function(t) {
                r.notice = r.notice || new e.Notice,
                r.addChild(r.notice)
            }, r),
            entryParam && 2 == entryParam.type) {
                var i = new eui.Label;
                return i.text = "维护中",
                i.size = 36,
                i.verticalCenter = 150,
                i.horizontalCenter = 0,
                r.addChild(i),
                r
            }
            var o = new eui.Group;
            cImg("dfbg.png", o);
            var s = new eui.Label;
            s.text = entryParam ? entryParam.oldparts[0].nameCn : "测试服",
            s.size = 24,
            s.right = 250,
            s.bottom = 60,
            s.textColor = 13222933,
            o.addChild(s);
            var l = new eui.Label;
            l.textFlow = (new egret.HtmlTextParser).parse("<u>点击换区</u>"),
            l.left = 250,
            l.bottom = 60,
            l.textColor = 65280,
            l.size = 23,
            o.addChild(l),
            o.horizontalCenter = 0,
            o.bottom = 220,
            r.addChild(o),
            o.addEventListener(egret.TouchEvent.TOUCH_TAP, function(t) {
                r.addChild(new e.SelectServer)
            }, r);
            var u = cImg("start.png", r);
            if (u.horizontalCenter = 0,
            u.bottom = 130,
            u.addEventListener(egret.TouchEvent.TOUCH_BEGIN, function() {
                u.scaleX = u.scaleY = .9
            }, r),
            u.addEventListener(egret.TouchEvent.TOUCH_END, function() {
                u.scaleX = u.scaleY = 1
            }, r),
            u.addEventListener(egret.TouchEvent.TOUCH_TAP, function(e) {
                if (entryParam.oldparts[0].st) {
                    var t = new eui.Label;
                    t.horizontalCenter = 0,
                    t.bottom = 250,
                    t.text = "当前服务器正在维护",
                    t.size = 24,
                    r.addChild(t);
                    var n = egret.Tween.get(t);
                    return void n.wait(1e3).to({
                        bottom: 300,
                        alpha: 0
                    }, 1e3).call(function() {
                        r.removeChild(t)
                    })
                }
                showWait(),
                r.touchEnabled = !1,
                r.touchChildren = !1,
                Main.report("entryClick"),
                enterGame(entryParam.oldparts[0].name)
            }, r),
            urlParam.showBackHall) {
                var c = cImg("btnBackhall.png", r);
                c.left = 5,
                c.top = 50,
                c.addEventListener(egret.TouchEvent.TOUCH_TAP, function(e) {
                    var t = window.logout;
                    t && t({
                        confirm: !0
                    })
                }, r)
            }
            var d = new eui.Label;
            return d.text = "抵制不良游戏，拒绝盗版游戏。注意自我保护，谨防上当受骗。\n适度游戏益脑，沉迷游戏伤身。合理安排时间，享受健康生活。\n文网游备字 [2017]M-RPG 1109号 新广出审[2017]7836 号\n（ISBN）：ISBN 978-7 498 00871-8\n著作权人 ：天津纷至互娱科技有限公司\n出版单位：北京科海电子出版社    适龄提示：18岁以上\n",
            d.size = 15,
            d.stroke = 1,
            d.textColor = 6645093,
            d.horizontalCenter = 0,
            d.lineSpacing = 5,
            d.textAlign = egret.HorizontalAlign.CENTER,
            r.addChild(d),
            d.bottom = 0,
            r
        }
        return __extends(r, t),
        r.prototype.sparkTween = function() {
            for (var e = this, t = 0; 15 > t; t++)
                setTimeout(function() {
                    return e.randomSpark()
                }, 1e3 * Math.random() + 1500);
            setTimeout(function() {
                return e.sparkTween()
            }, 1500)
        }
        ,
        r.prototype.randomSpark = function() {
            var e = cImg("gg.png", this);
            e.x = 300 * Math.random() + 500,
            e.rotation = 180 * Math.random(),
            e.touchEnabled = !1;
            var t = .7 + .3 * Math.random();
            e.scaleX = e.scaleY = t,
            e.y = -50 + 200 * Math.random() + 700;
            var r = egret.Tween.get(e);
            r.to({
                x: 480 * Math.random(),
                y: 500 * Math.random()
            }, 3500).call(function() {
                e.parent.removeChild(e),
                egret.Tween.removeTweens(e)
            })
        }
        ,
        r
    }(eui.Component);
    e.Scene = t,
    __reflect(t.prototype, "entry.Scene")
}(entry || (entry = {}));
var ThemeAdapter = function() {
    function e() {}
    return e.prototype.getTheme = function(e, t, r, n) {
        return __awaiter(this, void 0, void 0, function() {
            function a(e) {
                t.call(n, e)
            }
            function i(t) {
                t.resItem.url == e && (RES.removeEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, i, null),
                r.call(n))
            }
            var o, s = this;
            return __generator(this, function(r) {
                switch (r.label) {
                case 0:
                    return "undefined" == typeof generateEUI ? [3, 1] : (egret.callLater(function() {
                        t.call(n, generateEUI)
                    }, this),
                    [3, 6]);
                case 1:
                    return "undefined" == typeof generateEUI2 ? [3, 5] : urlParam.isWxGame ? [4, window.platform.loadZip("gameEui")] : [3, 3];
                case 2:
                    return o = r.sent(),
                    window.JSONParseClass.setData(o),
                    a(o),
                    egret.callLater(function() {
                        t.call(n, generateEUI2)
                    }, this),
                    [3, 4];
                case 3:
                    RES.getResByUrl("resource/gameEui.json", function(e, r) {
                        window.JSONParseClass.setData(e),
                        a(e),
                        egret.callLater(function() {
                            t.call(n, generateEUI2)
                        }, s)
                    }, this, RES.ResourceItem.TYPE_JSON),
                    r.label = 4;
                case 4:
                    return [3, 6];
                case 5:
                    RES.addEventListener(RES.ResourceEvent.ITEM_LOAD_ERROR, i, null),
                    RES.getResByUrl(e, a, this, RES.ResourceItem.TYPE_TEXT),
                    r.label = 6;
                case 6:
                    return [2]
                }
            })
        })
    }
    ,
    e
}();
__reflect(ThemeAdapter.prototype, "ThemeAdapter", ["eui.IThemeAdapter"]),
eui.Component.prototype.dynamicSkin = function(e, t) {
    return void 0 === t && (t = !0),
    __awaiter(this, void 0, void 0, function() {
        var r = this;
        return __generator(this, function(n) {
            return [2, new Promise(function(n) {
                return __awaiter(r, void 0, void 0, function() {
                    var r, a, i, o, s, l, u;
                    return __generator(this, function(c) {
                        switch (c.label) {
                        case 0:
                            return e ? (r = egret.getDefinitionByName(e),
                            r ? (t && (this.skinName = e,
                            this.skin || this.setSkin(new r)),
                            [2, this.parent && n()]) : [4, urlLoad("res/skinJson/" + e + ".json", RES.ResourceItem.TYPE_JSON)]) : [2, n()];
                        case 1:
                            a = c.sent(),
                            i = a.yl,
                            delete a.yl,
                            window.JSONParseClass.addSkin(a, e),
                            o = [];
                            for (s in i)
                                o.push(s);
                            l = 0,
                            c.label = 2;
                        case 2:
                            return l < o.length ? (u = o[l],
                            window[u] ? [3, 4] : (u.indexOf(".exml") >= 0 && console.log(e),
                            [4, this.dynamicSkin(u, !1)])) : [3, 5];
                        case 3:
                            c.sent(),
                            c.label = 4;
                        case 4:
                            return l++,
                            [3, 2];
                        case 5:
                            return t && (this.skinName = e,
                            this.skin || this.setSkin(new (egret.getDefinitionByName(e)))),
                            this.parent && n(),
                            [2]
                        }
                    })
                })
            }
            )]
        })
    })
}
;
var entry;
!function(e) {
    var t = function(t) {
        function n() {
            var e = t.call(this) || this;
            e.jobBtn = [],
            e.sexBtn = [],
            e.job = 0,
            e.sex = 0,
            e.input = new eui.EditableText,
            e.dice = new eui.Image,
            e.start = new egret.MovieClip,
            e.dbGroup = new eui.Group,
            e.left = e.top = e.right = e.bottom = 0;
            var r = 12168261
              , n = 1
              , a = 20
              , i = 20
              , o = 3
              , s = 3
              , l = !1
              , u = !1;
            return e.gf = new egret.GlowFilter(r,n,a,i,o,s,l,u),
            e.initUI(),
            e
        }
        return __extends(n, t),
        n.prototype.initUI = function() {
            return __awaiter(this, void 0, void 0, function() {
                var t, r, n, a, i, o, s, l, u = this;
                return __generator(this, function(c) {
                    switch (c.label) {
                    case 0:
                        return t = "Createroleeff",
                        [4, urlLoad("entry/" + t + ".json", RES.ResourceItem.TYPE_JSON)];
                    case 1:
                        return r = c.sent(),
                        [4, urlLoad("entry/" + t + ".png", RES.ResourceItem.TYPE_IMAGE)];
                    case 2:
                        return n = c.sent(),
                        a = new egret.MovieClipDataFactory,
                        a.mcDataSet = r,
                        a.texture = n,
                        this.start.movieClipData = a.generateMovieClipData(t),
                        this.start.play(-1),
                        this.start.touchEnabled = !0,
                        this.start.addEventListener(egret.TouchEvent.TOUCH_BEGIN, function() {
                            u.start.scaleX = u.start.scaleY = .9
                        }, this),
                        this.start.addEventListener(egret.TouchEvent.TOUCH_END, function() {
                            u.start.scaleX = u.start.scaleY = 1
                        }, this),
                        this.start.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                            return __awaiter(u, void 0, void 0, function() {
                                var t, r, n, a, i, o, s, l, u, c, d, h, g, p, v, m, f, w, C, y, _, b = this;
                                return __generator(this, function(E) {
                                    switch (E.label) {
                                    case 0:
                                        return Main.report("clickstart"),
                                        [4, e.Socket.createActor(this.input.text, this.sex, this.job + 1)];
                                    case 1:
                                        if (t = E.sent(),
                                        r = t[0],
                                        n = t[1],
                                        a = ["", "sql错误", "用户没登陆", "游戏服务没准备好", "角色上一次保存数据是否出现异常", "客户端选择角色的常规错误", "角色名称重复", "角色不存在", "错误的性别", "随机生成的名字已经分配完", "客户端上传的角色阵营参数错误", "客户端上传的角色职业参数错误", "名称无效，名称中包含非法字符或长度不合法", "如果玩家是帮主，不能删除该角色，需要玩家退帮", "已经登陆到其他服务器", "已经超过最大可建角色数量"],
                                        r)
                                            return Main.report("createError"),
                                            i = new eui.Label,
                                            i.horizontalCenter = 0,
                                            i.bottom = 250,
                                            i.text = a[Math.abs(r)],
                                            i.size = 24,
                                            this.addChild(i),
                                            o = egret.Tween.get(i),
                                            o.wait(1e3).to({
                                                bottom: 300,
                                                alpha: 0
                                            }, 1e3).call(function() {
                                                b.removeChild(i)
                                            }),
                                            [2];
                                        for (Main.report("createRole", [this.input.text, n]),
                                        this.start.touchEnabled = !1,
                                        s = function(e) {
                                            var t = l.getChildAt(e);
                                            egret.Tween.get(t).to({
                                                alpha: 0
                                            }, 200).call(function() {
                                                return b.removeChild(t)
                                            })
                                        }
                                        ,
                                        l = this,
                                        u = 1; u < this.numChildren; u++)
                                            s(u);
                                        return this.dbGroup.getChildAt(0).dispose(),
                                        c = "cjmeneff",
                                        [4, urlLoad("entry/" + c + ".json", RES.ResourceItem.TYPE_JSON)];
                                    case 2:
                                        return d = E.sent(),
                                        [4, urlLoad("entry/" + c + ".png", RES.ResourceItem.TYPE_IMAGE)];
                                    case 3:
                                        return h = E.sent(),
                                        g = new egret.MovieClipDataFactory,
                                        g.mcDataSet = d,
                                        g.texture = h,
                                        p = new egret.MovieClip,
                                        p.movieClipData = g.generateMovieClipData(c),
                                        p.play(1),
                                        setTimeout(function() {
                                            return Main.ins.showLoad(n)
                                        }, 1e3),
                                        v = new eui.Group,
                                        v.addChild(p),
                                        v.horizontalCenter = 3,
                                        v.verticalCenter = 0,
                                        this.addChild(v),
                                        m = cImg("progressBg2.png", this),
                                        m.horizontalCenter = 0,
                                        m.bottom = 72,
                                        f = new eui.ProgressBar,
                                        f.thumb = cImg("thumb2.png", f),
                                        f.horizontalCenter = 0,
                                        f.value = 0,
                                        f.bottom = 72,
                                        f.slideDuration = 1e3,
                                        f.labelFunction = function() {
                                            return ""
                                        }
                                        ,
                                        this.addChild(f),
                                        f.validateNow(),
                                        f.value = Main.curLP,
                                        Main.loadProgress.push(function(e, t) {
                                            f.value = e,
                                            C.text = t
                                        }),
                                        w = new eui.Label,
                                        urlParam.isWxGame || (w.textFlow = (new egret.HtmlTextParser).parse("<u>若长时间加载不成功，点击这里重载</u>")),
                                        w.textColor = 65280,
                                        w.horizontalCenter = 0,
                                        w.bottom = 30,
                                        w.size = 20,
                                        this.addChild(w),
                                        w.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                                            location.reload()
                                        }, this),
                                        C = new eui.Label,
                                        C.size = 14,
                                        C.horizontalCenter = 0,
                                        C.bottom = 120,
                                        C.textColor = 2137888,
                                        C.text = Main.curStr,
                                        this.addChild(C),
                                        m.visible = f.visible = C.visible = null == urlParam.iosTSType,
                                        [4, urlLoad("resource/sound/longlin_a_chuangjue.mp3", RES.ResourceItem.TYPE_SOUND)];
                                    case 4:
                                        return y = E.sent(),
                                        _ = y.play(0, 1),
                                        [2]
                                    }
                                })
                            })
                        }, this),
                        i = this,
                        [4, urlLoad("entry/c120eaf.json", RES.ResourceItem.TYPE_SHEET)];
                    case 3:
                        return i.ss = c.sent(),
                        o = cImg("createbg1.jpg", this),
                        o.verticalCenter = o.horizontalCenter = 0,
                        o = cImg("men.png", this),
                        o.verticalCenter = -64,
                        o.horizontalCenter = -3,
                        urlParam.showBackHall && (s = cImg("btnBackhall.png", this),
                        s.left = 5,
                        s.top = 50,
                        s.addEventListener(egret.TouchEvent.TOUCH_TAP, function(e) {
                            var t = window.logout;
                            t && t({
                                confirm: !0
                            })
                        }, this)),
                        [4, this.createRole()];
                    case 4:
                        return c.sent(),
                        this.createTitle(),
                        this.createJob(),
                        this.createSex(),
                        l = new eui.Group,
                        l.horizontalCenter = 0,
                        l.bottom = 10,
                        this.createInput(l),
                        this.createStart(l),
                        this.addChild(l),
                        this.randomName(),
                        this.sparkTween(),
                        this.createEnter(),
                        Main.report("enterCreate"),
                        Main.ins.startLoad(),
                        [2]
                    }
                })
            })
        }
        ,
        n.prototype.createTitle = function() {
            var e = new eui.Group;
            e.horizontalCenter = 0,
            e.top = 10,
            this.addChild(e);
            var t = new eui.HorizontalLayout;
            t.gap = 0,
            e.layout = t;
            var r = new eui.Image;
            r.source = this.ss.getTexture("createrole_title_bg"),
            e.addChild(r),
            r = new eui.Image,
            r.source = this.ss.getTexture("createrole_title_bg"),
            r.scaleX = -1,
            e.addChild(r),
            r = new eui.Image,
            r.source = this.ss.getTexture("createrole_title"),
            r.horizontalCenter = 0,
            r.top = e.top + 7,
            this.addChild(r)
        }
        ,
        n.prototype.createJob = function() {
            var e = this
              , t = new eui.Group;
            t.left = 20,
            t.bottom = 260,
            this.addChild(t);
            var r = new eui.VerticalLayout;
            r.gap = 20,
            t.layout = r;
            for (var n = function(r) {
                var n = a.jobBtn[r] = new eui.Image;
                n.source = a.ss.getTexture("createrole_job" + (r + 1)),
                n.filters = r != a.job ? [] : [a.gf],
                t.addChild(n),
                n.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                    for (var t = 0; t < e.jobBtn.length; t++)
                        e.jobBtn[t].filters = t != r ? [] : [e.gf];
                    e.job = r,
                    e.createRole()
                }, a)
            }, a = this, i = 0; 3 > i; i++)
                n(i)
        }
        ,
        n.prototype.createSex = function() {
            var e = this
              , t = new eui.Group;
            t.right = 24,
            t.bottom = 327,
            this.addChild(t);
            var r = new eui.VerticalLayout;
            r.gap = 20,
            t.layout = r;
            for (var n = ["createrole_boy", "createrole_girl"], a = function(r) {
                var a = i.sexBtn[r] = new eui.Image;
                a.source = i.ss.getTexture(n[r]),
                a.filters = r != i.sex ? [] : [i.gf],
                t.addChild(a),
                a.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                    for (var t = 0; t < e.sexBtn.length; t++)
                        e.sexBtn[t].filters = t != r ? [] : [e.gf];
                    e.sex = r,
                    e.createRole()
                }, i)
            }, i = this, o = 0; 2 > o; o++)
                a(o)
        }
        ,
        n.prototype.createInput = function(e) {
            var t = new eui.Group;
            t.horizontalCenter = 0;
            var r = new eui.Group;
            t.addChild(r),
            e.addChild(t);
            var n = new eui.HorizontalLayout;
            n.gap = 0,
            r.layout = n;
            var a = new eui.Image;
            a.source = this.ss.getTexture("createrole_input"),
            r.addChild(a),
            a = new eui.Image,
            a.source = this.ss.getTexture("createrole_input"),
            a.scaleX = -1,
            r.addChild(a);
            var i = this.input;
            i.textAlign = egret.HorizontalAlign.CENTER,
            i.textColor = 10458221,
            i.top = 10,
            i.size = 20,
            i.maxChars = 6,
            i.left = i.right = i.bottom = 0,
            t.addChild(i),
            this.dice.source = this.ss.getTexture("createrole_any"),
            this.dice.horizontalCenter = 150,
            this.dice.addEventListener(egret.TouchEvent.TOUCH_TAP, this.randomName, this),
            e.addChild(this.dice);
            var o = new eui.Label;
            o.size = 20,
            o.textColor = 16741647,
            o.text = "只需体验两分钟，你照会干我一样，爱象这款游戏！",
            o.top = 50,
            o.horizontalCenter = 0,
            e.addChild(o)
        }
        ,
        n.prototype.createStart = function(e) {
            var t = new eui.Group;
            t.top = 80,
            e.addChild(t);
            var r = new eui.HorizontalLayout;
            r.gap = 0,
            t.layout = r;
            var n = new eui.Image;
            n.source = this.ss.getTexture("createrole_title_bg2"),
            t.addChild(n);
            var a = new eui.Group;
            a.width = 250;
            var i = new eui.Group;
            a.addChild(i),
            i.horizontalCenter = 0,
            i.top = 45,
            i.addChild(this.start),
            t.addChild(a),
            n = new eui.Image,
            n.source = this.ss.getTexture("createrole_title_bg2"),
            n.scaleX = -1,
            t.addChild(n),
            n = cImg("dlyuanbaotishi.png", e),
            n.top = 170,
            n.horizontalCenter = 0,
            e.addChild(n)
        }
        ,
        n.prototype.randomName = function() {
            return __awaiter(this, void 0, void 0, function() {
                var t;
                return __generator(this, function(r) {
                    switch (r.label) {
                    case 0:
                        return t = this.input,
                        [4, e.Socket.getName(this.sex)];
                    case 1:
                        return t.text = r.sent(),
                        [2]
                    }
                })
            })
        }
        ,
        n.prototype.sparkTween = function() {
            for (var e = this, t = 0; 15 > t; t++)
                setTimeout(function() {
                    e.randomSpark()
                }, 1e3 * Math.random() + 1500);
            setTimeout(function() {
                e.stage && e.sparkTween()
            }, 1500)
        }
        ,
        n.prototype.randomSpark = function() {
            var e = new eui.Image;
            e.source = this.ss.getTexture("cr_3"),
            e.x = 300 * Math.random() + 500,
            e.rotation = 180 * Math.random(),
            e.touchEnabled = !1,
            this.addChild(e);
            var t = .3 * Math.random() + .7;
            e.scaleX = e.scaleY = t,
            e.y = 300 * Math.random() - 50 + 700;
            var r = egret.Tween.get(e);
            r.to({
                x: 480 * Math.random(),
                y: 500 * Math.random()
            }, 3500).call(function() {
                e.parent && e.parent.removeChild(e),
                egret.Tween.removeTweens(e)
            })
        }
        ,
        n.prototype.createEnter = function() {
            var e = this
              , t = ["", "", "", ""]
              , n = ["傲视چچ白风", "火舞忘情", "红颜多少", "傲视چچ小饼", "阳天霸", "剑仙", "傲视چچ篁缔", "傲视چچ晴琴", "疯癫笑笑", "傲视چچ拖拖", "一笑沉默", "浮夸飘零", "傲视چچ天帝", "独行无敌", "不是馒头", "宝贝酱油", "傲视چچ花哥", "傲视چچ叫兽", "凋零", "占戈云鬼", "华佗微微", "小手巅峰", "永恒魔尊", "打不过就跑", "专业傻瓜", "随风飘逸", "自由天龙", "月光冷月", "暧昧归来", "赵雲", "傲视چچ小妖", "战传奇", "七夜天堂", "小猪温柔", "兰儿宝贝"]
              , a = [];
            for (var i in n) {
                var o = [0, n[i]];
                a.push(o)
            }
            for (var i = 0; 2 > i; i++)
                a = t.concat(a);
            var s = ["野外BOSS尸鬼", "野外BOSS兽人将军", "野外BOSS尸霸", "野外BOSS沃玛教主", "野外BOSS烛龙妖", "野外BOSS獠牙猪王", "野外BOSS猛犸教主", "野外BOSS诅咒教主", "野外BOSS牛魔王", "野外BOSS黄泉教主", "野外BOSS阿修罗", "野外BOSS九尾妖狐", "野外BOSS梦魇统领", "野外BOSS魅魔女王", "野外BOSS魔神战尊", "野外BOSS凶暴蝎蛇", "野外BOSS九幽龙子", "野外BOSS神机巨兽", "野外BOSS阿努比斯"];
            for (var i in s) {
                var o = [1, s[i]]
                  , l = Math.floor(Math.random() * a.length);
                a.splice(l, 0, o)
            }
            var u = new eui.Scroller;
            u.touchEnabled = !1,
            u.touchChildren = !1,
            u.height = 100,
            u.horizontalCenter = 0,
            u.top = 60;
            var c = new eui.List
              , d = new eui.VerticalLayout;
            d.gap = 5,
            d.paddingTop = 2,
            c.layout = d,
            c.itemRenderer = r,
            c.useVirtualLayout = !0,
            c.dataProvider = new eui.ArrayCollection(a),
            u.addChild(c),
            u.viewport = c,
            this.addChild(u);
            var h = function() {
                if (e.stage) {
                    c.scrollV = 200;
                    var t = egret.Tween.get(c);
                    t.to({
                        scrollV: g
                    }, 40 * g).call(h, e)
                }
            }
              , g = c.height - 200
              , p = egret.Tween.get(c);
            p.to({
                scrollV: g
            }, 40 * g).call(h, this)
        }
        ,
        n.prototype.createRole = function() {
            return __awaiter(this, void 0, void 0, function() {
                var e = this;
                return __generator(this, function(t) {
                    return [2, new Promise(function(t) {
                        return __awaiter(e, void 0, void 0, function() {
                            var e, r, n, a, i, o, s, l, u, c, d;
                            return __generator(this, function(h) {
                                switch (h.label) {
                                case 0:
                                    return e = {
                                        0: {
                                            0: ["nzs", "nzs", "nzs"],
                                            1: ["zhanshi_f", "zhanshi_f", "animation"]
                                        },
                                        1: {
                                            0: ["fashi_m", "dashi_m", "animation"],
                                            1: ["fashi_f", "fashi_f", "animation"]
                                        },
                                        2: {
                                            0: ["daoshi_m_1", "daoshi_m_1", "animation"],
                                            1: ["daoshi_f", "daoshi_f", "animation"]
                                        }
                                    },
                                    r = e[this.job][this.sex],
                                    n = r[0],
                                    a = r[1],
                                    i = r[2],
                                    [4, urlLoad("entry/" + n + "_ske.json", RES.ResourceItem.TYPE_JSON)];
                                case 1:
                                    return o = h.sent(),
                                    [4, urlLoad("entry/" + n + "_tex.json", RES.ResourceItem.TYPE_JSON)];
                                case 2:
                                    return s = h.sent(),
                                    [4, urlLoad("entry/" + n + "_tex.png", RES.ResourceItem.TYPE_IMAGE)];
                                case 3:
                                    return l = h.sent(),
                                    u = dragonBones.EgretFactory.factory,
                                    u.parseDragonBonesData(o),
                                    u.parseTextureAtlasData(s, l),
                                    this.dbGroup.parent || (c = this.dbGroup,
                                    c.horizontalCenter = 0,
                                    c.verticalCenter = 300,
                                    this.addChildAt(c, 3)),
                                    this.dbGroup.numChildren && this.dbGroup.getChildAt(0).dispose(),
                                    this.dbGroup.removeChildren(),
                                    d = u.buildArmatureDisplay(a),
                                    d.animation.play(i, 0),
                                    this.dbGroup.addChild(d),
                                    t(),
                                    [2]
                                }
                            })
                        })
                    }
                    )]
                })
            })
        }
        ,
        n
    }(eui.Component);
    e.CreateRole = t,
    __reflect(t.prototype, "entry.CreateRole");
    var r = function(e) {
        function t() {
            var t = e.call(this) || this;
            return t.lab = new eui.Label,
            t.lab.size = 10,
            t.lab.fontFamily = "宋体",
            t.lab.textColor = 14668213,
            t.addChild(t.lab),
            t
        }
        return __extends(t, e),
        t.prototype.dataChanged = function() {
            if (!this.data || null == this.data[0] || "" == this.data[1])
                return void (this.lab.text = "");
            var e, t = this.data[0];
            e = 0 == t ? '玩家  <font color="#3EADFF">' + this.data[1] + "</font>  正在进入游戏" : '<font color="#3EADFF">' + this.data[1] + "</font>  刷新了",
            this.lab.textFlow = (new egret.HtmlTextParser).parse(e)
        }
        ,
        t
    }(eui.ItemRenderer);
    __reflect(r.prototype, "NameItemRender")
}(entry || (entry = {}));
var entry;
!function(e) {
    var t = function(t) {
        function n(n) {
            var a = t.call(this) || this;
            a.width = 420,
            a.height = 450,
            a.verticalCenter = a.horizontalCenter = 0;
            var i = cImg("tongyongkuang3bg.png", a);
            i.top = i.left = i.right = i.bottom = 0,
            i.scale9Grid = new egret.Rectangle(11,11,8,8),
            i = cImg("tongyongkuang3tou.png", a),
            i.right = i.left = 0,
            i = cImg("biaoti_hfxj.png", a),
            i.horizontalCenter = 0,
            i.top = 11,
            a.addChild(i);
            var o = new eui.Group;
            o.bottom = 6,
            o.horizontalCenter = 0,
            o.scaleX = .737;
            var s = new eui.HorizontalLayout;
            s.gap = 0,
            o.layout = s;
            var l = cImg("bantoumingkuang3.png", a);
            o.addChild(l),
            l = cImg("bantoumingkuang3.png", a),
            l.scaleX = -1,
            o.addChild(l),
            a.addChild(o);
            var u = new eui.Group;
            cImg("btn2.png", u);
            var c = new eui.Label;
            c.verticalCenter = 0,
            c.horizontalCenter = 0,
            c.text = "进入游戏",
            c.textColor = 14540731,
            c.size = 20,
            u.addChild(c),
            u.horizontalCenter = 0,
            u.bottom = 20,
            u.addEventListener(egret.TouchEvent.TOUCH_BEGIN, function() {
                u.scaleX = u.scaleY = .9
            }, a),
            u.addEventListener(egret.TouchEvent.TOUCH_END, function() {
                u.scaleX = u.scaleY = 1
            }, a),
            u.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                for (var t = h.numChildren, r = 0; t > r; r++) {
                    var n = h.getChildAt(r);
                    if (n.selected) {
                        Main.ins.removeChildren(),
                        Main.ins.addChild(new e.LoadingScene),
                        Main.ins.showLoad(n.data.id);
                        break
                    }
                }
            }, a),
            a.addChild(u);
            var d = new eui.Scroller;
            d.left = 10,
            d.top = 48,
            d.right = 10,
            d.bottom = 100,
            a.addChild(d);
            var h = new eui.List;
            return h.itemRenderer = r,
            d.viewport = h,
            d.addChild(h),
            h.dataProvider = new eui.ArrayCollection(n),
            h.selectedIndex = 0,
            h.addEventListener(eui.ItemTapEvent.ITEM_TAP, function(e) {
                for (var t = h.numChildren, r = 0; t > r; r++) {
                    var n = h.getChildAt(r);
                    n.selected = n.data == e.item,
                    n.dataChanged()
                }
            }, a),
            a
        }
        return __extends(n, t),
        n
    }(eui.Group);
    e.SelectRole = t,
    __reflect(t.prototype, "entry.SelectRole");
    var r = function(e) {
        function t() {
            var t = e.call(this) || this;
            t.head = new eui.Image,
            t.nameLab = new eui.Label,
            t.levelLab = new eui.Label,
            t.powerLab = new eui.Label,
            t.vipLab = new eui.BitmapLabel,
            t.vLab = new eui.BitmapLabel,
            t.selectImg = new eui.Image,
            t.height = 100;
            var r = cImg("tongyonglabbg.png", t);
            r.top = r.left = r.right = r.bottom = 0,
            r.scale9Grid = new egret.Rectangle(63,31,3,3),
            r = cImg("touxiangkuang0.png", t),
            r.width = r.height = 70,
            r.left = 25,
            r.verticalCenter = 0,
            r.scale9Grid = new egret.Rectangle(6,6,3,3),
            t.head.verticalCenter = 0,
            t.head.left = 30,
            t.addChild(t.head);
            var n = new eui.Group;
            n.verticalCenter = 0,
            n.left = 120;
            var a = new eui.VerticalLayout;
            return a.gap = 2,
            n.layout = a,
            t.addChild(n),
            t.nameLab.textColor = 15978507,
            t.nameLab.size = 20,
            t.nameLab.bold = !0,
            n.addChild(t.nameLab),
            t.levelLab.textColor = 11645079,
            t.levelLab.size = 18,
            n.addChild(t.levelLab),
            t.powerLab.textColor = 11645079,
            t.powerLab.size = 18,
            n.addChild(t.powerLab),
            t.selectImg.source = "entry/xuanzhongkuang2.png",
            t.selectImg.top = t.selectImg.left = t.selectImg.right = t.selectImg.bottom = 0,
            t.selectImg.scale9Grid = new egret.Rectangle(6,6,4,4),
            t.addChild(t.selectImg),
            n = new eui.Group,
            n.horizontalCenter = 115,
            n.verticalCenter = 0,
            t.addChild(n),
            t.vLab.text = "v",
            n.addChild(t.vLab),
            t.vipLab.verticalCenter = 5,
            t.vipLab.left = 30,
            n.addChild(t.vipLab),
            t.loadFnt(),
            t
        }
        return __extends(t, e),
        t.prototype.dataChanged = function() {
            this.head.source = "entry/head_" + this.data.roleClass + this.data.sex + ".png",
            this.nameLab.text = this.data.name,
            this.levelLab.text = "等级: " + this.data.zsLevel + "转" + this.data.level + "级",
            this.powerLab.text = "战力: " + this.data.power,
            this.selectImg.visible = this.selected,
            this.vipLab.visible = this.vLab.visible = !!this.data.vipLevel,
            this.vipLab.text = this.data.vipLevel + ""
        }
        ,
        t.prototype.loadFnt = function() {
            return __awaiter(this, void 0, void 0, function() {
                var e, t;
                return __generator(this, function(r) {
                    switch (r.label) {
                    case 0:
                        return e = this.vLab,
                        t = this.vipLab,
                        [4, urlLoad("entry/vt.fnt", RES.ResourceItem.TYPE_FONT)];
                    case 1:
                        return e.font = t.font = r.sent(),
                        [2]
                    }
                })
            })
        }
        ,
        t
    }(eui.ItemRenderer);
    __reflect(r.prototype, "SelectRoleItem")
}(entry || (entry = {}));
var entry;
!function(e) {
    var t = function() {
        function e(e) {
            this.id = e.readInt(),
            this.name = e.readUTF(),
            e.readByte(),
            this.roleClass = e.readInt(),
            this.zsLevel = e.readInt(),
            this.level = e.readInt(),
            this.power = e.readDouble(),
            this.vipLevel = e.readInt(),
            this.sex = e.readInt()
        }
        return e
    }();
    e.SelectRoleData = t,
    __reflect(t.prototype, "entry.SelectRoleData")
}(entry || (entry = {}));
var entry;
!function(e) {
    var t = function(t) {
        function r() {
            var e = t.call(this) || this;
            e.ac = new eui.ArrayCollection,
            e.top = 85,
            e.bottom = 110,
            e.horizontalCenter = 0,
            e.width = 550;
            var r = cImg("xfbg.png", e);
            r.scale9Grid = new egret.Rectangle(12,18,23,10),
            r.top = r.left = r.right = r.bottom = 0;
            var n = cImg("xft.png", e)
              , a = cImg("xft.png", e);
            a.scaleX = -1,
            n.horizontalCenter = -142,
            a.horizontalCenter = 142,
            n.top = a.top = -20;
            var i = cImg("xffnt.png", e);
            i.horizontalCenter = 0,
            i.top = -11,
            e.createSerArea(),
            e.createSerItem();
            var o = cImg("tuichubtn.png", e);
            return o.right = o.bottom = 0,
            o.addEventListener(egret.TouchEvent.TOUCH_TAP, function() {
                e.parent.removeChild(e)
            }, e),
            e
        }
        return __extends(r, t),
        r.prototype.createSerArea = function() {
            var t = this
              , r = new eui.Group;
            this.addChild(r),
            r.left = 15,
            r.top = 80,
            r.right = 310,
            r.bottom = 70;
            var n = cImg("xfg.png", r);
            n.top = n.left = n.right = n.bottom = 0,
            n.scale9Grid = new egret.Rectangle(11,11,8,8),
            entryParam || (entryParam = {
                parts: new Array(120)
            });
            var a = function() {
                var e = u - o.selectedIndex
                  , r = o.selectedIndex ? entryParam.parts.slice(e * l, (e + 1) * l).reverse() : entryParam.oldparts.concat();
                t.ac.replaceAll(r)
            }
              , i = new eui.Scroller;
            i.top = i.bottom = 15,
            i.horizontalCenter = 0,
            r.addChild(i);
            var o = new eui.List;
            o.itemRenderer = e.SerAreaItem;
            var s = new eui.VerticalLayout;
            s.gap = 10,
            o.layout = s,
            i.addChild(o),
            i.viewport = o;
            for (var l = 100, u = Math.ceil(entryParam.parts.length / l), c = [], d = 0; u > d; d++)
                c.push(l * d + 1 + "-" + (d + 1) * l + "区");
            c.push("最近登录"),
            o.dataProvider = new eui.ArrayCollection(c.reverse()),
            o.addEventListener(egret.Event.CHANGE, function(e) {
                for (var t = o.numChildren, r = 0; t > r; r++)
                    o.getChildAt(r).dataChanged();
                a()
            }, this),
            o.selectedIndex = 0,
            a()
        }
        ,
        r.prototype.createSerItem = function() {
            var t = this
              , r = new eui.Group;
            this.addChild(r),
            r.left = 250,
            r.top = 60,
            r.right = 15,
            r.bottom = 30;
            var n = cImg("xfg.png", r);
            n.top = n.left = n.right = n.bottom = 0,
            n.scale9Grid = new egret.Rectangle(11,11,8,8);
            var a = new eui.Scroller;
            a.top = a.bottom = 15,
            a.horizontalCenter = 0,
            r.addChild(a);
            var i = new eui.List;
            i.itemRenderer = e.ServerItem;
            var o = new eui.VerticalLayout;
            o.gap = 10,
            i.layout = o,
            a.addChild(i),
            a.viewport = i,
            i.dataProvider = this.ac,
            i.addEventListener(eui.ItemTapEvent.ITEM_TAP, function(e) {
                if (e.item.st) {
                    var r = new eui.Label;
                    r.horizontalCenter = 0,
                    r.bottom = 250,
                    r.text = "当前服务器正在维护",
                    r.size = 24,
                    t.addChild(r);
                    var n = egret.Tween.get(r);
                    return void n.wait(1e3).to({
                        bottom: 300,
                        alpha: 0
                    }, 1e3).call(function() {
                        t.removeChild(r)
                    })
                }
                i.touchEnabled = !1,
                i.touchChildren = !1,
                t.touchChildren = !1,
                showWait(),
                enterGame(e.item.name)
            }, this)
        }
        ,
        r
    }(eui.Component);
    e.SelectServer = t,
    __reflect(t.prototype, "entry.SelectServer")
}(entry || (entry = {}));
var entry;
!function(e) {
    var t = function(e) {
        function t() {
            var t = e.call(this) || this;
            return t.img = cImg("xf1.png", t),
            t.text = new eui.Label,
            t.text.size = 22,
            t.text.textColor = 13222933,
            t.text.stroke = 1,
            t.text.verticalCenter = t.text.horizontalCenter = 0,
            t.addChild(t.text),
            t
        }
        return __extends(t, e),
        t.prototype.dataChanged = function() {
            this.img.source = "entry/xf" + (+this.selected + 1) + ".png",
            this.text.text = this.data
        }
        ,
        t
    }(eui.ItemRenderer);
    e.SerAreaItem = t,
    __reflect(t.prototype, "entry.SerAreaItem")
}(entry || (entry = {}));
var entry;
!function(e) {
    var t = function(e) {
        function t() {
            var t = e.call(this) || this;
            t.tb = new eui.Image,
            t.width = 198,
            t.height = 56;
            var r = cImg("dk.png", t);
            return r.top = r.left = r.right = r.bottom = 0,
            t.dk = r,
            t.text = new eui.Label,
            t.text.verticalCenter = t.text.horizontalCenter = 0,
            t.text.size = 22,
            t.text.textColor = 16371614,
            t.text.stroke = 1,
            t.addChild(t.text),
            t.tb.source = "entry/whtb.png",
            t.tb.right = 5,
            t.tb.top = -2,
            t.tb.visible = !1,
            t.addChild(t.tb),
            t
        }
        return __extends(t, e),
        t.prototype.dataChanged = function() {
            this.text.text = this.data ? this.data.nameCn : "传奇" + this.itemIndex + "区",
            this.tb.visible = !!this.data.st;
            var e = [.3, .6, 0, 0, 0, .3, .6, 0, 0, 0, .3, .6, 0, 0, 0, 0, 0, 0, 1, 0]
              , t = new egret.ColorMatrixFilter(e);
            this.dk.filters = this.tb.visible ? [t] : []
        }
        ,
        t
    }(eui.ItemRenderer);
    e.ServerItem = t,
    __reflect(t.prototype, "entry.ServerItem")
}(entry || (entry = {}));
var PackageMap = [];
window.PackageMap = PackageMap;
var entry;
!function(e) {
    var t = function() {
        function t() {}
        return t.supplyProxy = function() {
            return this.skt.removeEventListener(egret.ProgressEvent.SOCKET_DATA, this.sktData, this),
            this.skt.removeEventListener(egret.Event.CLOSE, this.onClose, this),
            this.skt
        }
        ,
        t.connect = function() {
            var e = new egret.WebSocket;
            e.type = egret.WebSocket.TYPE_BINARY,
            e.addEventListener(egret.Event.CONNECT, this.connected, this),
            e.addEventListener(egret.Event.CLOSE, this.onClose, this),
            e.addEventListener(egret.ProgressEvent.SOCKET_DATA, this.sktData, this);
            var t = urlParam.wss || "ws://" + urlParam.srvaddr + ":" + urlParam.srvport;
            e.connectByUrl(t),
            console.log("connect to " + t),
            this.skt = e
        }
        ,
        t.connected = function(e) {
            var t = new egret.ByteArray;
            t.writeUnsignedInt(0),
            this.skt.writeBytes(t)
        }
        ,
        t.sendPack = function(e) {
            e.endian = egret.Endian.BIG_ENDIAN;
            var t = this.HEAD_SIZE;
            e.position = 2,
            e.writeShort(e.length - t),
            e.position = 4,
            e.writeShort(0),
            e.position = 6,
            e.writeShort(0),
            e.endian = egret.Endian.LITTLE_ENDIAN,
            this.skt.writeBytes(e)
        }
        ,
        t.sktData = function() {
            if (!this.phase) {
                var e = new egret.ByteArray;
                e.writeShort(0),
                this.skt.writeBytes(e),
                this.phase = 1,
                console.log("connect ok!"),
                e = this.getBytes(),
                e.writeByte(255),
                e.writeByte(1),
                e.writeInt(+urlParam.srvid),
                e.writeUTF(urlParam.user),
                e.writeByte(0),
                e.writeUTF(urlParam.spverify || ""),
                e.writeByte(0),
                e.writeUTF(urlParam.pf || ""),
                e.writeByte(0),
                e.writeUTF(urlParam.pfId || ""),
                e.writeByte(0),
                e.writeUTF(urlParam.appId || ""),
                e.writeByte(0),
                e.writeUTF(urlParam.appType || ""),
                e.writeByte(0),
                this.sendPack(e)
            }
            var t = new egret.ByteArray;
            t.endian = egret.Endian.BIG_ENDIAN,
            this.skt.readBytes(t);
            var r = t.readUnsignedShort();
            if (r == this.DEFAULT_TAG) {
                t.readUnsignedShort();
                t.position += 4,
                t.endian = egret.Endian.LITTLE_ENDIAN;
                var n = t.readUnsignedByte()
                  , a = t.readUnsignedByte();
                this[n] && this[n][a] && this[n][a](t)
            }
        }
        ,
        t.getBytes = function() {
            var e = new egret.ByteArray;
            return e.endian = egret.Endian.BIG_ENDIAN,
            e.writeShort(this.DEFAULT_TAG),
            e.writeShort(0),
            e.writeShort(0),
            e.writeShort(0),
            e.endian = egret.Endian.LITTLE_ENDIAN,
            e.writeUnsignedInt(this.pid++),
            e
        }
        ,
        t.getName = function(e) {
            var t = this;
            return new Promise(function(r) {
                var n = t.getBytes();
                n.writeByte(255),
                n.writeByte(6),
                n.writeByte(e),
                t.sendPack(n),
                t[255][6] = function(e) {
                    var t = e.readByte();
                    if (t)
                        return void console.warn("随机名字错误! -- " + t);
                    var n = (e.readByte(),
                    e.readUTF());
                    r(n)
                }
            }
            )
        }
        ,
        t.createActor = function(e, t, r) {
            var n = this;
            return new Promise(function(a) {
                var i = [255, 2]
                  , o = i[0]
                  , s = i[1]
                  , l = n.getBytes();
                l.writeByte(o),
                l.writeByte(s),
                l.writeUTF(e),
                l.writeByte(0),
                l.writeByte(t),
                l.writeByte(r),
                n.sendPack(l),
                n[o][s] = function(e) {
                    var t = e.readInt()
                      , r = e.readByte();
                    a([r, t])
                }
            }
            )
        }
        ,
        t.sendEnter = function(e) {
            var t = this.getBytes();
            t.writeByte(255),
            t.writeByte(5),
            t.writeInt(e),
            this.sendPack(t)
        }
        ,
        t.reconnect = function() {
            this.phase = 0,
            this.isReconnect = !0,
            this.connect()
        }
        ,
        t.onClose = function() {
            return __awaiter(this, void 0, void 0, function() {
                var t = this;
                return __generator(this, function(r) {
                    return e.Tips.show("网络已断开，点击确定重新连接", ["确定"], [function() {
                        return __awaiter(t, void 0, void 0, function() {
                            var e;
                            return __generator(this, function(t) {
                                switch (t.label) {
                                case 0:
                                    return [4, sendHttp(urlParam.reqRoot + "user/client/gv.json?game=" + urlParam._game)];
                                case 1:
                                    if (e = t.sent(),
                                    !e)
                                        return this.reconnect(),
                                        [2];
                                    if (JSON.parse(e).data == urlParam.v)
                                        this.reconnect();
                                    else {
                                        if (urlParam.isWxGame)
                                            return window.wx.getUpdateManager().applyUpdate(),
                                            [2];
                                        location.reload()
                                    }
                                    return [2]
                                }
                            })
                        })
                    }
                    ]),
                    [2]
                })
            })
        }
        ,
        t.DEFAULT_TAG = 43707,
        t.HEAD_SIZE = 8,
        t.pid = 0,
        t.phase = 0,
        t.isReconnect = !1,
        t[255] = {
            1: function(e) {
                var r = e.readByte();
                if (r) {
                    var n = ["", "密码错误", "没有这个账号", "账号已登录，请刷新页面，最长需等待3分钟后重新登录", "服务器忙", "服务器维护中", "Session服务器出错，可能数据库没连接好", "不存在这个服务器", "账号已纳入防沉迷系统，是否需要进行身份证信息填写？"];
                    return void alert("登录认证错误 " + n[r] + "  " + urlParam.srvid)
                }
                loginLog += "0:登录成功";
                var a = t.getBytes();
                a.writeByte(255),
                a.writeByte(4),
                t.sendPack(a)
            },
            4: function(r) {
                loginLog += "1:角色数据";
                var n = (r.readInt(),
                r.readByte());
                switch (n) {
                case 0:
                    console.log("进入创角"),
                    Main.ins.removeChildren(),
                    Main.ins.addChild(new e.CreateRole);
                    break;
                case 1:
                    if (t.isReconnect)
                        return void Main.ins.enterGame();
                    Main.ins.startLoad();
                    for (var a = r.readInt(), i = [], o = 0; a > o; o++) {
                        var s = new e.SelectRoleData(r);
                        i.push(s)
                    }
                    1 == a ? (console.log("进入加载界面"),
                    Main.ins.removeChildren(),
                    Main.ins.addChild(new e.LoadingScene),
                    Main.ins.showLoad(i[0].id)) : (console.log("进入选角界面"),
                    Main.ins.removeChildren(),
                    Main.ins.addChild(new e.SelectRole(i)))
                }
            },
            10: function(e) {
                for (var t = 0; 255 > t; t++)
                    PackageMap[t] = e.readUnsignedByte()
            }
        },
        t
    }();
    e.Socket = t,
    __reflect(t.prototype, "entry.Socket")
}(entry || (entry = {}));
